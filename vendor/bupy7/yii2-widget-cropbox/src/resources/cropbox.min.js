!function(e,t){"use strict"
function o(t,o){function n(){e(t.croppedContainer).html(""),e(t.croppedDataInput).val("")}function a(){e(t.btnScaleIn).attr("disabled","disabled"),e(t.btnScaleOut).attr("disabled","disabled"),e(t.btnCrop).attr("disabled","disabled")}function r(n){var a=0
void 0===c.data("mi-cropbox")||n||(a=c.data("mi-cropbox")),void 0!==o[a]?e(t.messageContainer).html(o[a]).show():e(t.messageContainer).hide(),c.data("mi-cropbox",++a)}var c=e(this)
e(t.btnScaleIn).on("click",function(){c.cropbox("scale",1.05)}),e(t.btnScaleOut).on("click",function(){c.cropbox("scale",.95)}),e(c.cropbox("getMembrane")).on("wheel",function(e){e.originalEvent.deltaY<0?c.cropbox("scale",1.01):c.cropbox("scale",.99),e.preventDefault&&e.preventDefault()}),e(t.fileInput).on("change",function(){var e=new FileReader
e.readAsDataURL(this.files[0]),e.onload=function(e){c.cropbox("load",e.target.result)}}),e(t.btnReset).on("click",function(){c.cropbox("reset")}),e(t.btnCrop).on("click",function(){c.cropbox("crop")}),c.on("cb:cropped",function(o){var n=e("<img />",{src:o.detail.data.image,"class":"img-thumbnail"})
e(t.croppedContainer).append(n),e(t.croppedDataInput).val(JSON.stringify(c.cropbox("getData")))}),c.on("cb:reset",n),c.on("cb:ready",n),a(),c.on("cb:disabledCtrls",a),c.on("cb:enabledCtrls",function(){e(t.btnScaleIn).removeAttr("disabled"),e(t.btnScaleOut).removeAttr("disabled"),e(t.btnCrop).removeAttr("disabled")}),c.on("cb:cropped",function(){r()}),e(t.fileInput).on("change",function(){r(!0)}),c.on("cb:reset",function(){e(t.messageContainer).hide()})}e.fn.cropbox=function(n){if("string"==typeof n){var a=n.replace(/^[_]*/,"")
if(t.prototype[a]){var r=e(this).data("cropbox")
return r[a].apply(r,Array.prototype.slice.call(arguments,1))}}else{if("object"==typeof n||!n){var c=n.selectors,i=n.messages||[]
return delete n.selectors,delete n.messages,this.each(function(){e(this).data("cropbox",new t(this,n)),o.call(this,c,i)})}e.error('Method Cropbox::"'+n+'()" not exists.')}}}(jQuery,Cropbox)
